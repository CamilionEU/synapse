# Get the distro we want to pull from as a dynamic build variable
ARG distro=""
FROM ${distro}

# Install the build dependencies
RUN apt-get update -qq -o Acquire::Languages=none \
    && env DEBIAN_FRONTEND=noninteractive apt-get install \
        -yqq --no-install-recommends -o Dpkg::Options::=--force-unsafe-io \
        build-essential debhelper devscripts equivs dh-virtualenv libpq-dev sqlite3 python3-dev libffi-dev libjpeg-dev zlib1g-dev libxslt1-dev python3-setuptools python3-pip libssl-dev lsb-release python3-venv
WORKDIR /synapse/build
ENTRYPOINT ["bash","/synapse/build/docker/build_debian.sh"]
